import{j as e}from"./ui-components-BzeP3NEV.js";import{a as s}from"./react-vendor-pFbjcDKR.js";import{d as t,e as a,P as r,C as i,a as c,b as l,c as n,B as d}from"./badge-BMwPockq.js";import{c as o,m,i as x,T as h,B as g,L as p,S as y,p as j,n as u}from"./index-DSn6Arvu.js";import{A as b,a as N}from"./alert-BeifeO2q.js";import{E as f}from"./eye-BPpa2dX2.js";import{C as v}from"./clock-ICEW4OJX.js";import{Z as w}from"./zap-BJD73Sl4.js";import{C as S}from"./calendar-AHb9oVYw.js";import{T as _}from"./trending-up-Il02X4LE.js";import{f as T}from"./utils-BBBj0rcX.js";import"./form-utils-5MXy8GNC.js";
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=o("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);let A=0;const C=new Map,M=e=>{if(C.has(e))return;const s=setTimeout(()=>{C.delete(e),O({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,s)},E=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?M(t):e.toasts.forEach(e=>{M(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===s.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},I=[];let D={toasts:[]};function O(e){D=E(D,e),I.forEach(e=>{e(D)})}function P({...e}){const s=(A=(A+1)%Number.MAX_SAFE_INTEGER,A.toString()),t=()=>O({type:"DISMISS_TOAST",toastId:s});return O({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>O({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function R(){const[o,A]=s.useState([]),[C,M]=s.useState([]),[E,R]=s.useState(!0),[U,z]=s.useState(!1),[F,W]=s.useState(null),{toast:q}=function(){const[e,t]=s.useState(D);return s.useEffect(()=>(I.push(t),()=>{const e=I.indexOf(t);e>-1&&I.splice(e,1)}),[e]),{...e,toast:P,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}();s.useEffect(()=>{B()},[]);const B=async()=>{try{const e=await t.me(),[s,i]=await Promise.all([a.filter({created_by:e.email},"-detected_date",50),r.filter({created_by:e.email},"-created_date",100)]);A(s),M(i)}catch(e){}finally{R(!1)}},V=s=>{switch(s){case"data_collection":return e.jsx(f,{className:"w-4 h-4"});case"sharing":return e.jsx(k,{className:"w-4 h-4"});case"user_rights":return e.jsx(y,{className:"w-4 h-4"});case"tracking":return e.jsx(_,{className:"w-4 h-4"});default:return e.jsx(h,{className:"w-4 h-4"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsx("div",{className:"text-center space-y-4",children:e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Policy Change Tracker"}),e.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Monitor your privacy agreements for changes and stay informed about policy updates"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(x,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:o.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Changes Detected"})]})}),e.jsx(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:C.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Agreements Monitored"})]})}),e.jsx(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:e.jsxs(c,{className:"p-6 text-center",children:[e.jsx(h,{className:"w-8 h-8 mx-auto mb-2 text-red-400"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(e=>e.risk_impact>=70).length}),e.jsx("div",{className:"text-sm text-gray-400",children:"High-Risk Changes"})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(n,{className:"text-white flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-400"}),"Recent Policy Changes"]})}),e.jsx(c,{children:0===o.length?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),e.jsx("p",{children:"No policy changes detected yet."}),e.jsx("p",{className:"text-sm mt-2",children:"We'll monitor your agreements and notify you of any changes."})]}):e.jsx("div",{className:"space-y-4",children:o.map((s,t)=>{return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:C.find(e=>e.id===s.agreement_id)?.title||"Unknown Agreement"}),e.jsx("p",{className:"text-sm text-gray-400",children:T(new Date(s.detected_date),"MMM d, yyyy")})]}),e.jsxs(d,{className:(a=s.risk_impact,a>=70?"text-red-400 bg-red-500/20 border-red-500/30":a>=40?"text-orange-400 bg-orange-500/20 border-orange-500/30":"text-yellow-400 bg-yellow-500/20 border-yellow-500/30")+" border",children:["Risk: ",s.risk_impact,"/100"]})]}),e.jsx("p",{className:"text-gray-300 mb-3",children:s.change_summary}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.change_categories?.map((s,t)=>e.jsxs(d,{variant:"outline",className:"text-xs border-gray-600 text-gray-400",children:[V(s),e.jsx("span",{className:"ml-1",children:s.replace(/_/g," ")})]},t))}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>(async e=>{W(e.id);try{const s=C.find(s=>s.id===e.agreement_id);await u({notificationType:"policy_change",data:{companyName:s?.title||"a service",changes:[e.change_summary],riskImpact:e.risk_impact,analysisUrl:"#"}}),q({title:"Notification Sent",description:"User has been notified about this policy change."})}catch(s){q({title:"Error",description:"Failed to send notification.",variant:"destructive"})}finally{W(null)}})(s),disabled:F===s.id,className:"text-blue-400 hover:bg-blue-900/50",children:[F===s.id?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(x,{className:"w-4 h-4 mr-2"}),"Notify"]})]}),s.new_clauses?.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-900/20 rounded-lg border border-red-500/30",children:[e.jsx("h5",{className:"text-sm font-medium text-red-400 mb-1",children:"New Concerning Clauses:"}),e.jsx("ul",{className:"text-sm text-gray-300 space-y-1",children:s.new_clauses.slice(0,2).map((s,t)=>e.jsxs("li",{children:["â€¢ ",s]},t))})]})]},s.id);var a})})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(n,{className:"text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-400"}),"Active Monitoring"]})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-white font-medium mb-2",children:"24/7 Policy Monitoring"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"We continuously monitor your agreements for changes and alert you to important updates."}),e.jsx(g,{onClick:()=>(async e=>{z(!0);try{const{data:s}=await j({agreementId:e});s.has_changed?(B(),q({title:"Policy Scan Complete",description:"New changes have been detected and logged."})):q({title:"Policy Scan Complete",description:"No significant changes found."})}catch(s){q({title:"Error",description:"Failed to monitor policy.",variant:"destructive"})}finally{z(!1)}})(),disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:U?"Checking...":"Check All Policies Now"})]})})]}),e.jsxs(i,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(n,{className:"text-white flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-green-400"}),"Monitoring Schedule"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Checks"}),e.jsx(d,{variant:"outline",className:"border-green-500/50 text-green-400",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly Deep Scan"}),e.jsx(d,{variant:"outline",className:"border-green-500/50 text-green-400",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Instant Alerts"}),e.jsx(d,{variant:"outline",className:"border-green-500/50 text-green-400",children:"Active"})]})]}),e.jsxs(b,{className:"border-blue-500/50 bg-blue-500/10",children:[e.jsx(h,{className:"h-4 w-4 text-blue-400"}),e.jsx(N,{className:"text-blue-400 text-sm",children:"Next scheduled scan: Today at 6:00 PM"})]})]})]})]})]})]})})}export{R as default};
