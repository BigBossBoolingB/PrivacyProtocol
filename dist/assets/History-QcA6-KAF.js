import{E as e,V as r,j as t,G as s,H as a,J as l,K as n,L as o,M as i,N as c,Q as d,U as h,W as m,X as x,Y as u,u as g,s as p,d as f,e as b,f as w,m as j,Z as y,_ as v,z as N}from"./ui-components-BzeP3NEV.js";import{a as _}from"./react-vendor-pFbjcDKR.js";import{C as S,a as k,B as C,d as R,P as E}from"./badge-BMwPockq.js";import{c as T,j as D,m as L,T as P,B as A,I as z,g as H,S as M,X as I,f as W,H as B}from"./index-DSn6Arvu.js";import{S as O,D as U,B as Y,T as X,I as F}from"./input-DoXZiO2D.js";import{C as V,E as q,D as $,a as Q,b as G,c as J}from"./dialog-B-cglD8w.js";import{B as K}from"./building-2-D89ECH1N.js";import{C as Z}from"./calendar-AHb9oVYw.js";import{E as ee}from"./eye-BPpa2dX2.js";import{f as re}from"./utils-BBBj0rcX.js";import"./form-utils-5MXy8GNC.js";
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),se=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ae=e,le=r,ne=_.forwardRef(({className:e,children:r,...l},n)=>t.jsxs(s,{ref:n,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...l,children:[r,t.jsx(a,{asChild:!0,children:t.jsx(te,{className:"h-4 w-4 opacity-50"})})]}));ne.displayName=s.displayName;const oe=_.forwardRef(({className:e,...r},s)=>t.jsx(h,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(se,{className:"h-4 w-4"})}));oe.displayName=h.displayName;const ie=_.forwardRef(({className:e,...r},s)=>t.jsx(m,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(te,{className:"h-4 w-4"})}));ie.displayName=m.displayName;const ce=_.forwardRef(({className:e,children:r,position:s="popper",...a},i)=>t.jsx(l,{children:t.jsxs(n,{ref:i,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[t.jsx(oe,{}),t.jsx(o,{className:D("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),t.jsx(ie,{})]})}));ce.displayName=n.displayName;_.forwardRef(({className:e,...r},s)=>t.jsx(x,{ref:s,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=x.displayName;const de=_.forwardRef(({className:e,children:r,...s},a)=>t.jsxs(i,{ref:a,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(c,{children:t.jsx(V,{className:"h-4 w-4"})})}),t.jsx(d,{children:r})]}));de.displayName=i.displayName;function he({filters:e,onFiltersChange:r}){return t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(ae,{value:e.riskLevel,onValueChange:t=>r({...e,riskLevel:t}),children:[t.jsx(ne,{className:"w-32 bg-gray-900/50 border-gray-800/50 text-white",children:t.jsx(le,{placeholder:"Risk Level"})}),t.jsxs(ce,{children:[t.jsx(de,{value:"all",children:"All Risks"}),t.jsx(de,{value:"high",children:"High Risk"}),t.jsx(de,{value:"medium",children:"Medium Risk"}),t.jsx(de,{value:"low",children:"Low Risk"})]})]}),t.jsxs(ae,{value:e.dateRange,onValueChange:t=>r({...e,dateRange:t}),children:[t.jsx(ne,{className:"w-32 bg-gray-900/50 border-gray-800/50 text-white",children:t.jsx(le,{placeholder:"Date Range"})}),t.jsxs(ce,{children:[t.jsx(de,{value:"all",children:"All Time"}),t.jsx(de,{value:"week",children:"This Week"}),t.jsx(de,{value:"month",children:"This Month"}),t.jsx(de,{value:"quarter",children:"This Quarter"})]})]}),t.jsxs(ae,{value:e.sortBy,onValueChange:t=>r({...e,sortBy:t}),children:[t.jsx(ne,{className:"w-32 bg-gray-900/50 border-gray-800/50 text-white",children:t.jsx(le,{placeholder:"Sort By"})}),t.jsxs(ce,{children:[t.jsx(de,{value:"newest",children:"Newest First"}),t.jsx(de,{value:"oldest",children:"Oldest First"}),t.jsx(de,{value:"riskHigh",children:"Highest Risk"}),t.jsx(de,{value:"riskLow",children:"Lowest Risk"}),t.jsx(de,{value:"alphabetical",children:"Alphabetical"})]})]})]})}function me({agreement:e,onView:r}){return t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:t.jsx(S,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm hover:bg-gray-900/70 transition-colors cursor-pointer",children:t.jsxs(k,{className:"p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(K,{className:"w-4 h-4 text-gray-400"}),t.jsx("h3",{className:"font-semibold text-white truncate",children:e.title})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[t.jsx(Z,{className:"w-4 h-4"}),t.jsx("span",{children:re(new Date(e.created_date),"MMM d, yyyy")})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(C,{className:(s=e.risk_score,s>=80?"bg-red-500/20 text-red-400 border-red-500/30":s>=60?"bg-orange-500/20 text-orange-400 border-orange-500/30":s>=40?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-green-500/20 text-green-400 border-green-500/30")+" border",children:[(e=>e>=80?"Critical":e>=60?"High":e>=40?"Medium":"Low")(e.risk_score)," (",e.risk_score,"/100)"]})})]}),t.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:e.analysis_summary}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.flagged_clauses?.length>0&&t.jsxs(C,{variant:"outline",className:"text-red-400 border-red-500/50 text-xs",children:[t.jsx(P,{className:"w-3 h-3 mr-1"}),e.flagged_clauses.length," issues"]}),e.third_party_trackers?.length>0&&t.jsxs(C,{variant:"outline",className:"text-purple-400 border-purple-500/50 text-xs",children:[t.jsx(O,{className:"w-3 h-3 mr-1"}),e.third_party_trackers.length," trackers"]}),e.data_usage_categories?.length>0&&t.jsxs(C,{variant:"outline",className:"text-blue-400 border-blue-500/50 text-xs",children:[e.data_usage_categories.length," data types"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.url&&t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",onClick:e=>e.stopPropagation(),children:t.jsx(q,{className:"w-4 h-4"})}),t.jsxs(A,{size:"sm",variant:"ghost",onClick:r,className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/10",children:[t.jsx(ee,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]})})});var s}_.forwardRef(({className:e,...r},s)=>t.jsx(u,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=u.displayName;var xe="ScrollArea",[ue,ge]=f(xe),[pe,fe]=ue(xe),be=_.forwardRef((e,r)=>{const{__scopeScrollArea:s,type:a="hover",dir:l,scrollHideDelay:n=600,...o}=e,[i,c]=_.useState(null),[d,h]=_.useState(null),[m,x]=_.useState(null),[u,f]=_.useState(null),[w,j]=_.useState(null),[y,v]=_.useState(0),[N,S]=_.useState(0),[k,C]=_.useState(!1),[R,E]=_.useState(!1),T=g(r,e=>c(e)),D=p(l);return t.jsx(pe,{scope:s,type:a,dir:D,scrollHideDelay:n,scrollArea:i,viewport:d,onViewportChange:h,content:m,onContentChange:x,scrollbarX:u,onScrollbarXChange:f,scrollbarXEnabled:k,onScrollbarXEnabledChange:C,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:R,onScrollbarYEnabledChange:E,onCornerWidthChange:v,onCornerHeightChange:S,children:t.jsx(b.div,{dir:D,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});be.displayName=xe;var we="ScrollAreaViewport",je=_.forwardRef((e,r)=>{const{__scopeScrollArea:s,children:a,nonce:l,...n}=e,o=fe(we,s),i=_.useRef(null),c=g(r,i,o.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),t.jsx(b.div,{"data-radix-scroll-area-viewport":"",...n,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});je.displayName=we;var ye="ScrollAreaScrollbar",ve=_.forwardRef((e,r)=>{const{forceMount:s,...a}=e,l=fe(ye,e.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:o}=l,i="horizontal"===e.orientation;return _.useEffect(()=>(i?n(!0):o(!0),()=>{i?n(!1):o(!1)}),[i,n,o]),"hover"===l.type?t.jsx(Ne,{...a,ref:r,forceMount:s}):"scroll"===l.type?t.jsx(_e,{...a,ref:r,forceMount:s}):"auto"===l.type?t.jsx(Se,{...a,ref:r,forceMount:s}):"always"===l.type?t.jsx(ke,{...a,ref:r}):null});ve.displayName=ye;var Ne=_.forwardRef((e,r)=>{const{forceMount:s,...a}=e,l=fe(ye,e.__scopeScrollArea),[n,o]=_.useState(!1);return _.useEffect(()=>{const e=l.scrollArea;let r=0;if(e){const t=()=>{window.clearTimeout(r),o(!0)},s=()=>{r=window.setTimeout(()=>o(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",t),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(r),e.removeEventListener("pointerenter",t),e.removeEventListener("pointerleave",s)}}},[l.scrollArea,l.scrollHideDelay]),t.jsx(w,{present:s||n,children:t.jsx(Se,{"data-state":n?"visible":"hidden",...a,ref:r})})}),_e=_.forwardRef((e,r)=>{const{forceMount:s,...a}=e,l=fe(ye,e.__scopeScrollArea),n="horizontal"===e.orientation,o=Fe(()=>c("SCROLL_END"),100),[i,c]=(d="hidden",h={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},_.useReducer((e,r)=>h[e][r]??e,d));var d,h;return _.useEffect(()=>{if("idle"===i){const e=window.setTimeout(()=>c("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[i,l.scrollHideDelay,c]),_.useEffect(()=>{const e=l.viewport,r=n?"scrollLeft":"scrollTop";if(e){let t=e[r];const s=()=>{const s=e[r];t!==s&&(c("SCROLL"),o()),t=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[l.viewport,n,c,o]),t.jsx(w,{present:s||"hidden"!==i,children:t.jsx(ke,{"data-state":"hidden"===i?"hidden":"visible",...a,ref:r,onPointerEnter:j(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:j(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Se=_.forwardRef((e,r)=>{const s=fe(ye,e.__scopeScrollArea),{forceMount:a,...l}=e,[n,o]=_.useState(!1),i="horizontal"===e.orientation,c=Fe(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,r=s.viewport.offsetHeight<s.viewport.scrollHeight;o(i?e:r)}},10);return Ve(s.viewport,c),Ve(s.content,c),t.jsx(w,{present:a||n,children:t.jsx(ke,{"data-state":n?"visible":"hidden",...l,ref:r})})}),ke=_.forwardRef((e,r)=>{const{orientation:s="vertical",...a}=e,l=fe(ye,e.__scopeScrollArea),n=_.useRef(null),o=_.useRef(0),[i,c]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=We(i.viewport,i.content),h={...a,sizes:i,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>n.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function m(e,r){return function(e,r,t,s="ltr"){const a=Be(t),l=a/2,n=r||l,o=a-n,i=t.scrollbar.paddingStart+n,c=t.scrollbar.size-t.scrollbar.paddingEnd-o,d=t.content-t.viewport,h="ltr"===s?[0,d]:[-1*d,0];return Ue([i,c],h)(e)}(e,o.current,i,r)}return"horizontal"===s?t.jsx(Ce,{...h,ref:r,onThumbPositionChange:()=>{if(l.viewport&&n.current){const e=Oe(l.viewport.scrollLeft,i,l.dir);n.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollLeft=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollLeft=m(e,l.dir))}}):"vertical"===s?t.jsx(Re,{...h,ref:r,onThumbPositionChange:()=>{if(l.viewport&&n.current){const e=Oe(l.viewport.scrollTop,i);n.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollTop=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollTop=m(e))}}):null}),Ce=_.forwardRef((e,r)=>{const{sizes:s,onSizesChange:a,...l}=e,n=fe(ye,e.__scopeScrollArea),[o,i]=_.useState(),c=_.useRef(null),d=g(r,c,n.onScrollbarXChange);return _.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),t.jsx(De,{"data-orientation":"horizontal",...l,ref:d,sizes:s,style:{bottom:0,left:"rtl"===n.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===n.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Be(s)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.x),onDragScroll:r=>e.onDragScroll(r.x),onWheelScroll:(r,t)=>{if(n.viewport){const s=n.viewport.scrollLeft+r.deltaX;e.onWheelScroll(s),Ye(s,t)&&r.preventDefault()}},onResize:()=>{c.current&&n.viewport&&o&&a({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ie(o.paddingLeft),paddingEnd:Ie(o.paddingRight)}})}})}),Re=_.forwardRef((e,r)=>{const{sizes:s,onSizesChange:a,...l}=e,n=fe(ye,e.__scopeScrollArea),[o,i]=_.useState(),c=_.useRef(null),d=g(r,c,n.onScrollbarYChange);return _.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),t.jsx(De,{"data-orientation":"vertical",...l,ref:d,sizes:s,style:{top:0,right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Be(s)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.y),onDragScroll:r=>e.onDragScroll(r.y),onWheelScroll:(r,t)=>{if(n.viewport){const s=n.viewport.scrollTop+r.deltaY;e.onWheelScroll(s),Ye(s,t)&&r.preventDefault()}},onResize:()=>{c.current&&n.viewport&&o&&a({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ie(o.paddingTop),paddingEnd:Ie(o.paddingBottom)}})}})}),[Ee,Te]=ue(ye),De=_.forwardRef((e,r)=>{const{__scopeScrollArea:s,sizes:a,hasThumb:l,onThumbChange:n,onThumbPointerUp:o,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:m,...x}=e,u=fe(ye,s),[p,f]=_.useState(null),w=g(r,e=>f(e)),v=_.useRef(null),N=_.useRef(""),S=u.viewport,k=a.content-a.viewport,C=y(h),R=y(c),E=Fe(m,10);function T(e){if(v.current){const r=e.clientX-v.current.left,t=e.clientY-v.current.top;d({x:r,y:t})}}return _.useEffect(()=>{const e=e=>{const r=e.target,t=p?.contains(r);t&&C(e,k)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[S,p,k,C]),_.useEffect(R,[a,R]),Ve(p,E),Ve(u.content,E),t.jsx(Ee,{scope:s,scrollbar:p,hasThumb:l,onThumbChange:y(n),onThumbPointerUp:y(o),onThumbPositionChange:R,onThumbPointerDown:y(i),children:t.jsx(b.div,{...x,ref:w,style:{position:"absolute",...x.style},onPointerDown:j(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),v.current=p.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",u.viewport&&(u.viewport.style.scrollBehavior="auto"),T(e)}}),onPointerMove:j(e.onPointerMove,T),onPointerUp:j(e.onPointerUp,e=>{const r=e.target;r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=N.current,u.viewport&&(u.viewport.style.scrollBehavior=""),v.current=null})})})}),Le="ScrollAreaThumb",Pe=_.forwardRef((e,r)=>{const{forceMount:s,...a}=e,l=Te(Le,e.__scopeScrollArea);return t.jsx(w,{present:s||l.hasThumb,children:t.jsx(Ae,{ref:r,...a})})}),Ae=_.forwardRef((e,r)=>{const{__scopeScrollArea:s,style:a,...l}=e,n=fe(Le,s),o=Te(Le,s),{onThumbPositionChange:i}=o,c=g(r,e=>o.onThumbChange(e)),d=_.useRef(void 0),h=Fe(()=>{d.current&&(d.current(),d.current=void 0)},100);return _.useEffect(()=>{const e=n.viewport;if(e){const r=()=>{if(h(),!d.current){const r=Xe(e,i);d.current=r,i()}};return i(),e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[n.viewport,h,i]),t.jsx(b.div,{"data-state":o.hasThumb?"visible":"hidden",...l,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:j(e.onPointerDownCapture,e=>{const r=e.target.getBoundingClientRect(),t=e.clientX-r.left,s=e.clientY-r.top;o.onThumbPointerDown({x:t,y:s})}),onPointerUp:j(e.onPointerUp,o.onThumbPointerUp)})});Pe.displayName=Le;var ze="ScrollAreaCorner",He=_.forwardRef((e,r)=>{const s=fe(ze,e.__scopeScrollArea),a=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&a?t.jsx(Me,{...e,ref:r}):null});He.displayName=ze;var Me=_.forwardRef((e,r)=>{const{__scopeScrollArea:s,...a}=e,l=fe(ze,s),[n,o]=_.useState(0),[i,c]=_.useState(0),d=Boolean(n&&i);return Ve(l.scrollbarX,()=>{const e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),c(e)}),Ve(l.scrollbarY,()=>{const e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),o(e)}),d?t.jsx(b.div,{...a,ref:r,style:{width:n,height:i,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function Ie(e){return e?parseInt(e,10):0}function We(e,r){const t=e/r;return isNaN(t)?0:t}function Be(e){const r=We(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-t)*r;return Math.max(s,18)}function Oe(e,r,t="ltr"){const s=Be(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-a,n=r.content-r.viewport,o=l-s,i=N(e,"ltr"===t?[0,n]:[-1*n,0]);return Ue([0,n],[0,o])(i)}function Ue(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(e[1]-e[0]);return r[0]+s*(t-e[0])}}function Ye(e,r){return e>0&&e<r}var Xe=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const l={left:e.scrollLeft,top:e.scrollTop},n=t.left!==l.left,o=t.top!==l.top;(n||o)&&r(),t=l,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Fe(e,r){const t=y(e),s=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),_.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,r)},[t,r])}function Ve(e,r){const t=y(r);v(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,t])}var qe=be,$e=je,Qe=He;const Ge=_.forwardRef(({className:e,children:r,...s},a)=>t.jsxs(qe,{ref:a,className:D("relative overflow-hidden",e),...s,children:[t.jsx($e,{className:"h-full w-full rounded-[inherit]",children:r}),t.jsx(Je,{}),t.jsx(Qe,{})]}));Ge.displayName=qe.displayName;const Je=_.forwardRef(({className:e,orientation:r="vertical",...s},a)=>t.jsx(ve,{ref:a,orientation:r,className:D("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:t.jsx(Pe,{className:"relative flex-1 rounded-full bg-border"})}));Je.displayName=ve.displayName;const Ke=({label:e,granted:r})=>t.jsxs("div",{className:"flex items-center gap-2",children:[r?t.jsx(H,{className:"w-4 h-4 text-green-400"}):t.jsx(I,{className:"w-4 h-4 text-red-400"}),t.jsx("span",{className:"text-sm "+(r?"text-gray-300":"text-gray-500"),children:e})]}),Ze=[{key:"contact_info",label:"Contact Info"},{key:"financial_info",label:"Financial Info"},{key:"health_info",label:"Health Info"},{key:"location_info",label:"Location Info"},{key:"biometric_info",label:"Biometric Info"},{key:"usage_data",label:"Usage Data"},{key:"device_info",label:"Device Info"},{key:"user_content",label:"User Content"}];function er({agreement:e,onClose:r}){const s=e=>{switch(e){case"critical":return"bg-red-500/20 text-red-400 border-red-500/30";case"high":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"low":return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return t.jsx($,{open:!0,onOpenChange:r,children:t.jsxs(Q,{className:"max-w-4xl max-h-[80vh] bg-gray-900 border-gray-800 text-white",children:[t.jsx(G,{children:t.jsxs(J,{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(K,{className:"w-6 h-6 text-blue-400"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:e.title}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[t.jsx(Z,{className:"w-4 h-4"}),t.jsx("span",{children:re(new Date(e.created_date),"MMM d, yyyy")})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(C,{className:(a=e.risk_score,a>=80?"bg-red-500/20 text-red-400 border-red-500/30":a>=60?"bg-orange-500/20 text-orange-400 border-orange-500/30":a>=40?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-green-500/20 text-green-400 border-green-500/30")+" border text-lg px-3 py-1",children:[e.risk_score,"/100"]}),e.url&&t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:t.jsx(q,{className:"w-5 h-5"})})]})]})}),t.jsx(Ge,{className:"max-h-[60vh]",children:t.jsxs("div",{className:"space-y-6 pr-4",children:[t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsx("h3",{className:"font-semibold text-white mb-2",children:"Analysis Summary"}),t.jsx("p",{className:"text-gray-300",children:e.analysis_summary})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(U,{className:"w-4 h-4 text-blue-400"}),"Data Collection"]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ze.map(r=>t.jsx(Ke,{label:r.label,granted:e.data_collection_breakdown?.[r.key]},r.key))})]}),t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(Y,{className:"w-4 h-4 text-green-400"}),"Your Rights"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(Ke,{label:"Data Access",granted:e.user_rights_summary?.data_access}),t.jsx(Ke,{label:"Data Deletion",granted:e.user_rights_summary?.data_deletion}),t.jsx(Ke,{label:"Data Portability",granted:e.user_rights_summary?.data_portability}),t.jsx(Ke,{label:"Opt-out of Sale",granted:e.user_rights_summary?.opt_out_of_sale})]})]})]}),e.data_usage_categories&&e.data_usage_categories.length>0&&t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(ee,{className:"w-4 h-4 text-blue-400"}),"Data Usage Categories"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.data_usage_categories.map((e,r)=>t.jsx(C,{variant:"outline",className:"border-blue-500/50 text-blue-400",children:e.replace(/_/g," ")},r))})]}),e.flagged_clauses&&e.flagged_clauses.length>0&&t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(P,{className:"w-4 h-4 text-red-400"}),"Flagged Clauses (",e.flagged_clauses.length,")"]}),t.jsx("div",{className:"space-y-4",children:e.flagged_clauses.map((e,r)=>t.jsxs("div",{className:"p-3 bg-gray-700/50 rounded-lg",children:[t.jsx("div",{className:"flex items-start justify-between mb-2",children:t.jsxs(C,{className:`${s(e.risk_level)} border text-xs`,children:[e.risk_level," risk"]})}),t.jsxs("blockquote",{className:"text-gray-300 border-l-4 border-gray-600 pl-3 mb-2 italic text-sm",children:['"',e.clause_text,'"']}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-400",children:"Plain Language:"}),t.jsx("p",{className:"text-white",children:e.plain_language})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-400",children:"Explanation:"}),t.jsx("p",{className:"text-gray-300",children:e.explanation})]}),e.what_if_scenario&&t.jsxs("div",{className:"p-2 bg-red-900/30 rounded-lg border border-red-500/30 mt-2",children:[t.jsxs("span",{className:"text-xs font-medium text-red-400 flex items-center gap-1",children:[t.jsx(z,{className:"w-3 h-3"}),"What If Scenario:"]}),t.jsx("p",{className:"text-gray-300 text-xs mt-1",children:e.what_if_scenario})]})]})]},r))})]}),e.recommendations&&e.recommendations.length>0&&t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(H,{className:"w-4 h-4 text-green-400"}),"Recommendations"]}),t.jsx("div",{className:"space-y-3",children:e.recommendations.map((e,r)=>t.jsxs("div",{className:"p-3 bg-gray-700/50 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-white text-sm",children:e.action}),t.jsx("p",{className:"text-gray-300 text-sm",children:e.description})]},r))})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.third_party_trackers&&e.third_party_trackers.length>0&&t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(O,{className:"w-4 h-4 text-purple-400"}),"Third-Party Sharing"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.third_party_trackers.map((e,r)=>t.jsx(C,{variant:"outline",className:"border-purple-500/50 text-purple-400",children:e},r))})]}),t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(X,{className:"w-4 h-4 text-yellow-400"}),"Data Retention"]}),t.jsx("p",{className:"text-white font-medium",children:e.data_retention_policy})]})]}),e.opt_out_options&&e.opt_out_options.length>0&&t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:[t.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[t.jsx(M,{className:"w-4 h-4 text-green-400"}),"Opt-out Options"]}),t.jsx("div",{className:"space-y-3",children:e.opt_out_options.map((e,r)=>t.jsx("div",{className:"p-3 bg-gray-700/50 rounded-lg",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-white text-sm",children:e.type}),t.jsx("p",{className:"text-gray-300 text-sm",children:e.instructions})]}),e.url&&t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors ml-2",children:t.jsx(q,{className:"w-4 h-4"})})]})},r))})]})]})})]})});var a}function rr(){const[e,r]=_.useState([]),[s,a]=_.useState([]),[l,n]=_.useState(!0),[o,i]=_.useState(null),[c,d]=_.useState(""),[h,m]=_.useState({riskLevel:"all",dateRange:"all",sortBy:"newest"});_.useEffect(()=>{x()},[]),_.useEffect(()=>{u()},[e,c,h]);const x=async()=>{try{const e=await R.me(),t=await E.filter({created_by:e.email},"-created_date",100);r(t)}catch(e){}finally{n(!1)}},u=()=>{let r=[...e];if(c&&(r=r.filter(e=>e.title.toLowerCase().includes(c.toLowerCase())||e.company.toLowerCase().includes(c.toLowerCase()))),"all"!==h.riskLevel&&(r=r.filter(e=>{const r=e.risk_score||0;switch(h.riskLevel){case"low":return r<40;case"medium":return r>=40&&r<70;case"high":return r>=70;default:return!0}})),"all"!==h.dateRange){const e=new Date,t=new Date;switch(h.dateRange){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"quarter":t.setMonth(e.getMonth()-3)}r=r.filter(e=>new Date(e.created_date)>=t)}switch(h.sortBy){case"newest":r.sort((e,r)=>new Date(r.created_date)-new Date(e.created_date));break;case"oldest":r.sort((e,r)=>new Date(e.created_date)-new Date(r.created_date));break;case"riskHigh":r.sort((e,r)=>(r.risk_score||0)-(e.risk_score||0));break;case"riskLow":r.sort((e,r)=>(e.risk_score||0)-(r.risk_score||0));break;case"alphabetical":r.sort((e,r)=>e.title.localeCompare(r.title))}a(r)},g={total:e.length,high:e.filter(e=>(e.risk_score||0)>=70).length,medium:e.filter(e=>(e.risk_score||0)>=40&&(e.risk_score||0)<70).length,low:e.filter(e=>(e.risk_score||0)<40).length};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[t.jsx("div",{className:"text-center space-y-4",children:t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Analysis History"}),t.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Review and manage your privacy agreement analyses"})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(S,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:g.total}),t.jsx("div",{className:"text-sm text-gray-400",children:"Total Analyses"})]})}),t.jsx(S,{className:"bg-red-500/10 border-red-500/30 backdrop-blur-sm",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-400",children:g.high}),t.jsx("div",{className:"text-sm text-red-400",children:"High Risk"})]})}),t.jsx(S,{className:"bg-yellow-500/10 border-yellow-500/30 backdrop-blur-sm",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:g.medium}),t.jsx("div",{className:"text-sm text-yellow-400",children:"Medium Risk"})]})}),t.jsx(S,{className:"bg-green-500/10 border-green-500/30 backdrop-blur-sm",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-400",children:g.low}),t.jsx("div",{className:"text-sm text-green-400",children:"Low Risk"})]})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx(F,{placeholder:"Search agreements...",value:c,onChange:e=>d(e.target.value),className:"pl-10 bg-gray-900/50 border-gray-800/50 text-white placeholder-gray-400"})]}),t.jsx(he,{filters:h,onFiltersChange:m})]}),t.jsx("div",{className:"space-y-6",children:l?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:t.jsx(B,{className:"w-8 h-8 text-white animate-pulse"})}),t.jsx("p",{className:"text-gray-400",children:"Loading your analysis history..."})]}):0===s.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-700 rounded-full flex items-center justify-center mb-4",children:t.jsx(W,{className:"w-8 h-8 text-gray-400"})}),t.jsx("p",{className:"text-gray-400",children:c||"all"!==h.riskLevel||"all"!==h.dateRange?"No agreements match your search criteria":"No privacy agreements analyzed yet"})]}):t.jsx("div",{className:"grid gap-4",children:s.map(e=>t.jsx(me,{agreement:e,onView:()=>i(e)},e.id))})}),o&&t.jsx(er,{agreement:o,onClose:()=>i(null)})]})})}export{rr as default};
