import{j as e}from"./ui-components-BzeP3NEV.js";import{L as s,a as t}from"./react-vendor-pFbjcDKR.js";import{C as a,a as r,b as l,c as i,B as n,P as c,U as o,d}from"./badge-BMwPockq.js";import{c as x,m,a as g,B as h,T as u,C as j,b as y,S as p,d as b,P as N,s as v,U as f}from"./index-DSn6Arvu.js";import"./tabs-DdFUnJNg.js";import{C as w}from"./clock-ICEW4OJX.js";import{E as k}from"./dialog-B-cglD8w.js";import{f as _}from"./utils-BBBj0rcX.js";import{T as A}from"./trending-up-Il02X4LE.js";import{T as R}from"./target-ClL8scOb.js";import{F as S,S as M}from"./SubscriptionModal-DcnuW8ey.js";import{Z as C}from"./zap-BJD73Sl4.js";import{A as P}from"./activity-D5z1gwrP.js";import"./form-utils-5MXy8GNC.js";import"./label-DqmJy21e.js";
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=x("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function $({title:s,value:t,icon:l,trend:i,color:n}){const c=e=>{switch(e){case"blue":default:return"bg-blue-500 text-blue-400";case"green":return"bg-green-500 text-green-400";case"red":return"bg-red-500 text-red-400";case"orange":return"bg-orange-500 text-orange-400";case"purple":return"bg-purple-500 text-purple-400"}};return e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.2},children:e.jsx(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm hover:bg-gray-900/70 transition-colors",children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${c(n)} bg-opacity-20`,children:e.jsx(l,{className:`w-6 h-6 ${c(n).split(" ")[1]}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:t}),e.jsx("div",{className:"text-sm text-gray-400",children:s})]})]}),i&&e.jsx("div",{className:"text-xs text-gray-500 border-t border-gray-800 pt-2",children:i})]})})})}function D({agreements:t,loading:c,getRiskColor:o,getRiskBadgeColor:d}){return c?e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsx(i,{className:"text-white",children:"Recent Analyses"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/2"})]},t))})})]}):e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between",children:[e.jsxs(i,{className:"text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-400"}),"Recent Analyses"]}),e.jsx(s,{to:g("History"),children:e.jsx(h,{variant:"ghost",size:"sm",className:"text-blue-400 hover:text-blue-300",children:"View All"})})]}),e.jsx(r,{children:0===t.length?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"No privacy agreements analyzed yet."}),e.jsx(s,{to:g("Analyzer"),children:e.jsx(h,{className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"Analyze Your First Agreement"})})]}):e.jsx("div",{className:"space-y-4",children:t.map((s,t)=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50 hover:bg-gray-800/70 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-white",children:s.title}),e.jsx("p",{className:"text-sm text-gray-400",children:_(new Date(s.created_date),"MMM d, yyyy")})]}),e.jsxs(n,{className:`${d(s.risk_score)} border`,children:[s.risk_score,"/100"]})]}),e.jsx("p",{className:"text-sm text-gray-300 mb-3",children:s.analysis_summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:s.flagged_clauses?.length>0&&e.jsxs(n,{variant:"outline",className:"text-red-400 border-red-500/50",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),s.flagged_clauses.length," issues"]})}),s.url&&e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.jsx(k,{className:"w-4 h-4"})})]})]},s.id))})})]})}function T({agreements:s,loading:t}){if(t)return e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsx(i,{className:"text-white",children:"Risk Trends"})}),e.jsx(r,{children:e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-gray-700 rounded"})})})]});const n=(()=>{if(0===s.length)return[];const e=s.reduce((e,s)=>{const t=new Date(s.created_date).toLocaleDateString("en-US",{month:"short"});return e[t]||(e[t]={total:0,riskSum:0}),e[t].total+=1,e[t].riskSum+=s.risk_score||0,e},{});return Object.entries(e).map(([e,s])=>({month:e,avgRisk:Math.round(s.riskSum/s.total),count:s.total}))})();return e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(i,{className:"text-white flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-400"}),"Risk Trends"]})}),e.jsx(r,{children:0===n.length?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),e.jsx("p",{children:"Not enough data to show trends yet."})]}):e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>e.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:s.month}),e.jsxs("div",{className:"text-sm text-gray-400",children:[s.count," analyses"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold "+(s.avgRisk>=70?"text-red-400":s.avgRisk>=40?"text-orange-400":"text-green-400"),children:s.avgRisk}),e.jsx("div",{className:"text-sm text-gray-400",children:"avg risk"})]})]},s.month))})})]})}function U({agreements:s,profile:t,loading:n}){if(n)return e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsx(i,{className:"text-white",children:"Privacy Insights"})}),e.jsx(r,{children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"h-4 bg-gray-700 rounded"},t))})})]});const c=(()=>{if(0===s.length)return[];const e=[],a=s.reduce((e,s)=>e+(s.risk_score||0),0)/s.length;s.filter(e=>(e.risk_score||0)>=70).length,a>=70?e.push({type:"warning",title:"High Risk Portfolio",description:`Your average risk score is ${Math.round(a)}/100. Consider reviewing high-risk agreements.`,icon:u,color:"red"}):a>=40?e.push({type:"info",title:"Moderate Risk Level",description:`Your privacy risk is moderate (${Math.round(a)}/100). Some agreements may need attention.`,icon:p,color:"orange"}):e.push({type:"success",title:"Low Risk Portfolio",description:`Good news! Your average risk score is only ${Math.round(a)}/100.`,icon:p,color:"green"});const r={};s.forEach(e=>{e.data_usage_categories?.forEach(e=>{r[e]=(r[e]||0)+1})});const l=Object.entries(r).sort((e,s)=>s[1]-e[1])[0];return l&&e.push({type:"info",title:"Common Data Usage",description:`Most agreements involve ${l[0].replace(/_/g," ")} (${l[1]} agreements).`,icon:R,color:"blue"}),"strict"===t?.privacy_tolerance&&a>30&&e.push({type:"warning",title:"Profile Mismatch",description:"Your strict privacy settings suggest you might want to review some agreements.",icon:y,color:"purple"}),e.slice(0,3)})();return e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(i,{className:"text-white flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-blue-400"}),"Privacy Insights"]})}),e.jsx(r,{children:0===c.length?e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("p",{children:"Analyze more agreements to get personalized insights."})}):e.jsx("div",{className:"space-y-4",children:c.map((s,t)=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+("red"===s.color?"bg-red-500/20 text-red-400":"orange"===s.color?"bg-orange-500/20 text-orange-400":"green"===s.color?"bg-green-500/20 text-green-400":"blue"===s.color?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:e.jsx(s.icon,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-white mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-400",children:s.description})]})]})},t))})})]})}function Y({subscription:s,features:t}){if(!s||!t)return null;const c=t.unlimited_analyses,o=s.monthly_analyses_used||0,d=t.monthly_analyses_limit,x=c?0:Math.min(100,o/d*100);return e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{className:"pb-3",children:e.jsxs(i,{className:"text-white flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-blue-400"}),"Usage This Month",c&&e.jsxs(n,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"Premium"]})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Privacy Analyses"}),e.jsxs("span",{className:"font-bold "+(c?"text-green-400":x>=90?"text-red-400":x>=70?"text-orange-400":"text-blue-400"),children:[o,c?"":` / ${d}`,c&&e.jsx("span",{className:"text-gray-400 ml-1",children:"(Unlimited)"})]})]}),!c&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{value:x,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:d})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-gray-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:s.total_analyses||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Total Analyses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:c?"âˆž":Math.max(0,d-o)}),e.jsx("div",{className:"text-xs text-gray-400",children:"Remaining"})]})]}),!c&&x>=80&&e.jsxs("div",{className:"p-3 bg-orange-900/30 rounded-lg border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-400 text-sm",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Running low on analyses"})]}),e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Upgrade to Premium for unlimited analyses at just $1.99/month"})]})]})]})}function H(){const[n,x]=t.useState([]),[j,y]=t.useState(null),[b,N]=t.useState(null),[k,_]=t.useState(!0),[A,H]=t.useState(null),[B,E]=t.useState(!1);t.useEffect(()=>{L(),I()},[]);const I=async()=>{try{const{data:e}=await v({action:"get_subscription"});H(e)}catch(e){}},L=async()=>{try{const[e,s,t]=await Promise.all([c.filter({created_by:(await d.me()).email},"-created_date",50),o.filter({created_by:(await d.me()).email},"-created_date",1),d.me()]);x(e),y(s[0]||null),N(t)}catch(e){}finally{_(!1)}},q=()=>{if(0===n.length)return 0;const e=n.reduce((e,s)=>e+(s.risk_score||0),0);return Math.round(e/n.length)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Privacy Command Center"}),e.jsx("p",{className:"text-gray-400 text-lg md:text-xl max-w-3xl mx-auto",children:"Your digital sovereignty dashboard. Monitor, analyze, and protect your privacy rights across all platforms."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(s,{to:g("Analyzer"),children:e.jsxs(h,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium px-6 py-3 rounded-xl shadow-lg",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),"Analyze New Agreement"]})}),e.jsx(s,{to:g("Profile"),children:e.jsxs(h,{variant:"outline",className:"border-gray-700 text-gray-300 hover:bg-gray-800 px-6 py-3 rounded-xl",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Configure Profile"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx($,{title:"Total Agreements",value:n.length,icon:S,trend:`+${n.filter(e=>{const s=new Date;return s.setDate(s.getDate()-7),new Date(e.created_date)>s}).length} this week`,color:"blue"}),e.jsx($,{title:"Average Risk Score",value:q(),icon:p,trend:"Based on your profile",color:q()>=70?"red":q()>=40?"orange":"green"}),e.jsx($,{title:"High Risk Alerts",value:n.filter(e=>(e.risk_score||0)>=70).length,icon:u,trend:"Require attention",color:"red"}),e.jsx($,{title:"Privacy Score",value:"strict"===j?.privacy_tolerance?"Strict":"moderate"===j?.privacy_tolerance?"Moderate":"Relaxed",icon:P,trend:"Your privacy stance",color:"purple"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(D,{agreements:n.slice(0,5),loading:k,getRiskColor:e=>e>=80?"text-red-500":e>=60?"text-orange-500":e>=40?"text-yellow-500":"text-green-500",getRiskBadgeColor:e=>e>=80?"bg-red-500/20 text-red-400 border-red-500/30":e>=60?"bg-orange-500/20 text-orange-400 border-orange-500/30":e>=40?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-green-500/20 text-green-400 border-green-500/30"}),e.jsx(T,{agreements:n,loading:k})]}),e.jsxs("div",{className:"space-y-8",children:[A&&e.jsx(Y,{subscription:A.subscription,features:A.features}),e.jsx(U,{agreements:n,profile:j,loading:k}),e.jsxs(a,{className:"bg-gray-900/50 border-gray-800/50 backdrop-blur-sm",children:[e.jsx(l,{children:e.jsxs(i,{className:"text-white flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-400"}),"Quick Actions"]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsx(s,{to:g("Analyzer"),children:e.jsxs(h,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-800/50",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Analyze New Agreement",e.jsx(z,{className:"w-4 h-4 ml-auto"})]})}),e.jsx(s,{to:g("History"),children:e.jsxs(h,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-800/50",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"View Analysis History",e.jsx(z,{className:"w-4 h-4 ml-auto"})]})}),e.jsx(s,{to:g("Insights"),children:e.jsxs(h,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-800/50",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Community Insights",e.jsx(z,{className:"w-4 h-4 ml-auto"})]})})]})]})]})]}),e.jsx(M,{open:B,onClose:()=>E(!1)})]})})}export{H as default};
